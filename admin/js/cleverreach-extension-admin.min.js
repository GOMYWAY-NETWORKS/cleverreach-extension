(function(a){a.fn.parseSelectOptions=function(e,d,b,c){if(typeof b!=="undefined"&&b.length>0){e.find(d).empty().append('<option value="">'+c+"</option>");
a.each(b,function(f,h){var g=e.find(d);g.append(a("<option>",{value:h.id,text:h.name}));if(h.selected){g.find('option[value="'+h.id+'"]').prop("selected",true);
}});}else{e.find(d).empty();}};a(document).ready(function(){var f;var e=cre_admin.selector,d=e+cre_admin.container_selector,j=e+cre_admin.key_selector,i=e+cre_admin.list_selector,b=e+cre_admin.form_selector,g=e+cre_admin.source_selector,c=e+cre_admin.response_selector,h=e+cre_admin.shortcode_selector;
a(d+" form").on("input propertychange change submit",function(){clearTimeout(f);f=setTimeout(function(){var l=a(d),k={api_key:l.find(j).val(),list_id:l.find(i).val(),form_id:l.find(b).val(),source:l.find(g).val()};
a.ajax({url:cre_admin.ajaxurl,type:"POST",dataType:"JSON",data:{action:"cre_admin_ajax_controller_interaction",nonce:cre_admin.nonce,cr_admin_form:k},beforeSend:function(){l.find(c).removeClass("confirmed invalid");
l.find(c).addClass("updating animate");},success:function(m){l.find(c).removeClass("updating animate");if(m.status==="success"){l.find(c).addClass("confirmed");
}else{l.find(c).addClass("invalid");}a(this).parseSelectOptions(l,i,m.list_options,cre_admin.list_empty);a(this).parseSelectOptions(l,b,m.form_options,cre_admin.form_empty);
if(typeof m.shortcode_id!=="undefined"&&m.shortcode_id.length>0){a(h).text(m.shortcode_id);}else{a(h).text("");}},error:function(){l.find(c).removeClass("updating animate");
l.find(i).empty();l.find(b).empty();l.find(c).addClass("invalid");}});},1000);return false;});});})(jQuery);