(function(e){e.fn.parseSelectOptions=function(p,o,m,n){if(typeof m!=="undefined"&&m.length>0){p.find(o).empty().append('<option value="">'+n+"</option>");
e.each(m,function(q,s){var r=p.find(o);r.append(e("<option>",{value:s.id,text:s.name}));if(s.selected){r.find('option[value="'+s.id+'"]').prop("selected",true);
}});}else{p.find(o).empty();}};var h;var g=cre_admin.selector,f=g+cre_admin.container_selector,l=g+cre_admin.key_selector,j=g+cre_admin.list_selector,a=g+cre_admin.form_selector,i=g+cre_admin.source_selector,b=g+cre_admin.response_selector,d=g+cre_admin.update_list_id_selector,c=g+cre_admin.update_form_id_selector,k=g+cre_admin.update_source_selector;
e(f+" form").on("input propertychange change submit",function(){clearTimeout(h);h=setTimeout(function(){var n=e(f),m={api_key:n.find(l).val(),list_id:n.find(j).val(),form_id:n.find(a).val(),source:n.find(i).val()};
e.ajax({url:cre_admin.ajaxurl,type:"POST",dataType:"JSON",data:{action:"cre_admin_ajax_controller_interaction",nonce:cre_admin.nonce,cr_admin_form:m},beforeSend:function(){n.find(b).removeClass("confirmed invalid");
n.find(b).addClass("updating animate");},success:function(o){n.find(b).removeClass("updating animate");if(o.status==="success"){n.find(b).addClass("confirmed");
}else{n.find(b).addClass("invalid");}e(this).parseSelectOptions(n,j,o.list_options,cre_admin.list_empty);e(this).parseSelectOptions(n,a,o.form_options,cre_admin.form_empty);
if(typeof o.list_id!=="undefined"&&o.list_id.length>0){e(d).text(o.list_id);}else{e(d).text("");}if(typeof o.form_id!=="undefined"&&o.form_id.length>0){e(c).text(o.form_id);
}else{e(c).text("");}if(typeof o.source!=="undefined"&&o.source.length>0){e(k).text(o.source);}else{e(k).text("");}},error:function(){n.find(b).removeClass("updating animate");
n.find(j).empty();n.find(a).empty();n.find(b).addClass("invalid");}});},1000);return false;});})(jQuery);